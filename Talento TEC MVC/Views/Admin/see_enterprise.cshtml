@model Talento_TEC_MVC.Models.admin.enterprise_info

@{
    ViewBag.Title = "Información de la empresa";
}

<h2>Aceptar / Rechazar Empresa</h2>

@using (Html.BeginForm()) 
{
    @Html.AntiForgeryToken()
    
    <div class="form-horizontal">
        <h3>Información de la empresa</h3>
        <li role="presentation" class="divider-line"></li>

       
        @Html.ValidationSummary(true, "", new { @class = "text-danger" })
        <div class="form-group">
            @Html.LabelFor(model => model.nombreEmpresa, htmlAttributes: new { @class = "control-label col-xs-6 col-sm-4" })
            <div class="col-xs-6 col-sm-4">
                @Html.EditorFor(model => model.nombreEmpresa, new { htmlAttributes = new { @class = "form-control", @readonly="readonly", @id="nombreEmpresa" } })
                @Html.ValidationMessageFor(model => model.nombreEmpresa, "", new { @class = "text-danger" })
            </div>
        </div>

        <div class="form-group">
            @Html.LabelFor(model => model.cedulaEmpresa, htmlAttributes: new { @class = "control-label col-xs-6 col-sm-4" })
            <div class="col-xs-6 col-sm-4">
                @Html.EditorFor(model => model.cedulaEmpresa, new { htmlAttributes = new { @class = "form-control", @id="cedulaEmpresa", @readonly = "readonly" } })
                @Html.ValidationMessageFor(model => model.cedulaEmpresa, "", new { @class = "text-danger" })
            </div>
        </div>

        <div class="form-group">
            @Html.LabelFor(model => model.pais, htmlAttributes: new { @class = "control-label col-xs-6 col-sm-4" })
            <div class="col-xs-6 col-sm-4">
                @Html.EditorFor(model => model.pais, new { htmlAttributes = new { @class = "form-control", @id="pais", @readonly = "readonly" } })
                @Html.ValidationMessageFor(model => model.pais, "", new { @class = "text-danger" })
            </div>
        </div>

        <div class="form-group">
            @Html.LabelFor(model => model.provincia, htmlAttributes: new { @class = "control-label col-xs-6 col-sm-4" })
            <div class="col-xs-6 col-sm-4">
                @Html.EditorFor(model => model.provincia, new { htmlAttributes = new { @class = "form-control", @id="provincia", @readonly = "readonly" } })
                @Html.ValidationMessageFor(model => model.provincia, "", new { @class = "text-danger" })
            </div>
        </div>

        <div class="form-group">
            @Html.LabelFor(model => model.direccion, htmlAttributes: new { @class = "control-label col-xs-6 col-sm-4" })
            <div class="col-xs-6 col-sm-4">
                @Html.EditorFor(model => model.direccion, new { htmlAttributes = new { @class = "form-control", @id = "direccion", @readonly = "readonly" } })
                @Html.ValidationMessageFor(model => model.direccion, "", new { @class = "text-danger" })
            </div>
        </div>

        <div class="form-group">
            @Html.LabelFor(model => model.descripcion, htmlAttributes: new { @class = "control-label col-xs-6 col-sm-4" })
            <div class="col-xs-6 col-sm-4">
                @Html.EditorFor(model => model.descripcion, new { htmlAttributes = new { @class = "form-control", @id="descripcion", @readonly = "readonly" } })
                @Html.ValidationMessageFor(model => model.descripcion, "", new { @class = "text-danger" })
            </div>
        </div>

        <div class="form-group">
            @Html.LabelFor(model => model.telefono, htmlAttributes: new { @class = "control-label col-xs-6 col-sm-4" })
            <div class="col-xs-6 col-sm-4">
                @Html.EditorFor(model => model.telefono, new { htmlAttributes = new { @class = "form-control", @id = "telefono", @readonly = "readonly" } })
                @Html.ValidationMessageFor(model => model.telefono, "", new { @class = "text-danger" })
            </div>
        </div>

        <div class="form-group">
            @Html.LabelFor(model => model.email, htmlAttributes: new { @class = "control-label col-xs-6 col-sm-4" })
            <div class="col-xs-6 col-sm-4">
                @Html.EditorFor(model => model.email, new { htmlAttributes = new { @class = "form-control", @id = "email", @readonly = "readonly" } })
                @Html.ValidationMessageFor(model => model.email, "", new { @class = "text-danger" })
            </div>
        </div>

        <div class="form-group">
            @Html.LabelFor(model => model.pagina_web, htmlAttributes: new { @class = "control-label col-xs-6 col-sm-4" })
            <div class="col-xs-6 col-sm-4">
                @Html.EditorFor(model => model.pagina_web, new { htmlAttributes = new { @class = "form-control", @id = "pagina_web", @readonly = "readonly" } })
                @Html.ValidationMessageFor(model => model.pagina_web, "", new { @class = "text-danger" })
            </div>
        </div>

        <div class="form-group">
            @Html.LabelFor(model => model.sectores_productivos, htmlAttributes: new { @class = "control-label col-xs-6 col-sm-4" })
            <div class="col-xs-6 col-sm-4">
                @Html.EditorFor(model => model.sectores_productivos, new { htmlAttributes = new { @class = "form-control", @id="sectores_productivos", @readonly = "readonly" } })
                @Html.ValidationMessageFor(model => model.sectores_productivos, "", new { @class = "text-danger" })
            </div>
        </div>

        <li role="presentation" class="divider-line"></li>
        <div class="form-group">
            @Html.Label("Persona de contacto", new { @class = "control-label col-xs-6 col-sm-4" })

        </div>

            <div class="form-group">
                @Html.LabelFor(model => model.nombreContacto, htmlAttributes: new { @class = "control-label col-xs-6 col-sm-4" })
                <div class="col-xs-6 col-sm-4">
                    @Html.EditorFor(model => model.nombreContacto, new { htmlAttributes = new { @class = "form-control", @id = "nombreContacto", @readonly = "readonly" } })
                    @Html.ValidationMessageFor(model => model.nombreContacto, "", new { @class = "text-danger" })
                </div>
            </div>

            <div class="form-group">
                @Html.LabelFor(model => model.cargoContacto, htmlAttributes: new { @class = "control-label col-xs-6 col-sm-4" })
                <div class="col-xs-6 col-sm-4">
                    @Html.EditorFor(model => model.cargoContacto, new { htmlAttributes = new { @class = "form-control", @id = "cargoContacto", @readonly = "readonly" } })
                    @Html.ValidationMessageFor(model => model.cargoContacto, "", new { @class = "text-danger" })
                </div>
            </div>

            <div class="form-group">
                @Html.LabelFor(model => model.telefonoContacto, htmlAttributes: new { @class = "control-label col-xs-6 col-sm-4" })
                <div class="col-xs-6 col-sm-4">
                    @Html.EditorFor(model => model.telefonoContacto, new { htmlAttributes = new { @class = "form-control", @id = "telefonoContacto", @readonly = "readonly" } })
                    @Html.ValidationMessageFor(model => model.telefonoContacto, "", new { @class = "text-danger" })
                </div>
            </div>

            <div class="form-group">
                @Html.LabelFor(model => model.emailContacto, htmlAttributes: new { @class = "control-label col-xs-6 col-sm-4" })
                <div class="col-xs-6 col-sm-4">
                    @Html.EditorFor(model => model.emailContacto, new { htmlAttributes = new { @class = "form-control", @id = "emailContacto", @readonly = "readonly" } })
                    @Html.ValidationMessageFor(model => model.emailContacto, "", new { @class = "text-danger" })
                </div>
            </div>

            <div class="form-group">
                <div class="col-md-offset-5 col-xs-6 col-sm-4 ">
                    <input type="button" value="Aceptar" onclick="aceptarEmpresa()" class="btn btn-lg btn-success" />
                    <input type="button" value="No Aceptar" onclick="rechazarEmpresa()" class="btn btn-lg btn-danger" />
                </div>
            </div>
        </div>
}
<!--
<div>
    @Html.ActionLink("Back to List", "Index")
</div>
-->

<script>

    var IdEmpresa = sessionStorage.getItem("IdEmpresa");

    $("#nombreEmpresa").val("Ejemplo");
    $("#cedulaEmpresa").val("0000000");
    $("#pais").val("Costa Rica");
    $("#provincia").val("Cartago");
    $("#direccion").val("Cartago");
    $("#descripcion").val("Esto es un ejemplo");
    $("#telefono").val("00000000");
    $("#email").val("ejemplo@email.com");
    $("#pagina_web").val("ejemplo.com");
    $("#sectores_productivos").val("esto es un sector de ejemplo");
    $("#nombreContacto").val("Un ejemplo de contacto");
    $("#cargoContacto").val("un ejemplo de cargo");
    $("#telefonoContacto").val("0000000");
    $("#emailContacto").val("ejemplo2@email.com");
    
    var enterprise = {
        nombreEmpresa: "",
        cedulaEmpresa: "",
        pais: "",
        provincia: "",
        direccion: "",
        descripcion: "",
        telefono: "",
        email: "",
        pagina_web: "",
        sectores_productivos: "",
        nombreContacto: "",
        cargoContacto: "",
        telefonoContacto: "",
        emailContacto: ""
    }
    function getData() {
        var importedData;

        $(document).ready(function () {
            $.ajax({
                url: "https://talentotec-api.azurewebsites.net/api/Get_Enterprise/"+IdEmpresa,
                type: "GET",
                data: enterprise,
                sucess: function (data) {
                    for (var i = 0; i < data.lenght; i++) {
                        console.log(data[i]);
                        /*           NombreEmpresa 
                                     CedulaJuridica 
                                     Direccion 
                                     PROVINCIA_EMPRESA 
                                     Pais 
                                     TelefonoEmpresa 
                                     EmailEmpresa 
                                     URL 
                                     NombreContacto 
                                     EmailContacto 
                                     CargoContacto 
                                     TelefonoContacto 
                                     DescripcionActividades 
                                     Sectores 
                                     Usuario 
                                     Contrasena */ 
                        $("#nombreEmpresa").val(data[i].NompreEmpresa);
                        $("#cedulaEmpresa").val(data[i].CedulaJuridica);
                        $("#pais").val(data[i].Pais);
                        $("#provincia").val(data[i].PROVINCIA_EMPRESA);
                        $("#direccion").val(data[i].Direccion);
                        $("#descripcion").val(data[i].DescripcionActividades);
                        $("#telefono").val(data[i].TelefonoEmpresa);
                        $("#email").val(data[i].EmailEmpresa);
                        $("#pagina_web").val(data[i].URL);
                        $("#sectores_productivos").val(data[i].Sectores);
                        $("#nombreContacto").val(data[i].NombreContacto);
                        $("#cargoContacto").val(data[i].CargoContacto);
                        $("#telefonoContacto").val(data[i].TelefonoContacto);
                        $("#emailContacto").val(data[i].EmailContacto);
                    }
                    importedData = data;
                },
                error: function (e1, e2, e3) {
                    console.log(e3 + " " + e2);
                }
            });
        });
        return importedData;
    }

    function aceptarEmpresa() {
        var accept = {
            IDEmpresa: 1,
            NuevoEstado: "Activa"
        }
        changeStateEnterprise(accept);

        parent.history.back();
    }

    function rechazarEmpresa() {
        var accept = {
            IDEmpresa: 1,
            NuevoEstado: "Inactiva" // esto puede variar
        }
        changeStateEnterprise(accept);

        parent.history.back();
    }

    function changeStateEnterprise(acceptData) {
        var importedData;
        $(document).ready(function () {
            $.ajax({
                url: "https://talentotec-api.azurewebsites.net/api/Change_State_Enterprise",
                type: "POST",
                data: acceptData,
                dataType: "json",
                success: function (data) {
                    for (var i = 0; i < data.length; i++) {

                    }
                    importedData = data;
                },
                error: function (e1, e2, e3) {
                    console.log(e3 + " " + e2);
                }
            });
        });
        return importedData;
    }

</script>

@{
    ViewBag.Title = "Información Estudiantes";
}

<!-- Texto de Bienvenida -->
<h1>Estudiantes de Práctica Profesional</h1>
<br />
<p>
    Podrás encontrar la demanda de proyectos de práctica profesional que las empresas publiquen en 
    Talento TEC, así como toda la información para que la contactes. Para hacer uso de esta aplicación, 
    deberás tener menos de ocho créditos faltantes del plan de estudios. 
    En la siguiente casilla se encuentra la información de contacto de los coordinadores de práctica profesional:
</p>
<br />

<div class="dropdown" id="dwnSchools" align="center">
    <button class="btn btn-primary dropdown-toggle" type="button" data-toggle="dropdown">
        Seleccione una escuela
        <span class="caret"></span>
    </button>
    <ul class="dropdown-menu dropdown-menu-center" role="menu" aria-labelledby="menu1" >
        
    </ul>
</div>

<script>


    $(document).ready(function () {
        $.ajax({
            url: "http://talentotec-api.azurewebsites.net/api/Schools",
            type: "GET",
            dataType: "text",
            success: function (data) {
                //  console.log(data);
                var json = $.parseJSON(data);
                for (var i = 0; i < json.length; i++) {
                   // console.log(json[i]);
                    //var txt = $("<li onclick='showSchoolInfo()'><a href='#'> </a></li>").text(json[i]);
                    $("#dwnSchools ul").append(
                        $("<li>").attr("id",i).attr("onclick","showSchoolInfo("+i+")").append(
                        $("<a>").attr("href", "#").append(json[i])));


                }
               // console.log("data");
               // console.log(json.length);
            },
            error: function (e1, e2, e3) {
                console.log(e3 + " " + e2);
            }
        });
    });


    
    function showSchoolInfo(ID) {
        //console.log("actions");
        var p = $("#"+ID).text();
        console.log(p);

        // llamamos a la api
        var school = {
            nombreEscuela : p
        }
        $.ajax({
            url: "http://talentotec-api.azurewebsites.net/api/Coordinators",
            type: "POST",
            dataType: "json",
            data:school,
            success: function (data) {
                console.log(data.length);
                //var json = $.parseJSON(data);
                //console.log(json);
            },
            error: function (e1, e2, e3) {
                console.log(e3 + " " + e2);
            }
        });

       // var x = document.getElementById(idElement).innerText;
       // console.log(x);

        //x.value
        /*
        if (!event.target.matches('dropdown-toggle')) {
            print("GOA");
        }*/
    }
    
</script>